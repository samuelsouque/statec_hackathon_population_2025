<!DOCTYPE html>
<html ng-app="myApp">
<head>
    <meta charset="UTF-8">
    <title>Application Graphique & Carte</title>
    <!-- AngularJS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.2/angular.min.js"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <!-- Chroma JS -->
    <script src="https://unpkg.com/chroma-js@3.1.2/dist/chroma.min.cjs"></script>
    <!-- Font Awesome pour les icônes -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Mon style CSS -->
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="third_page.css">
    <!-- Mon script -->
    <script src="app.js"></script>

    <link href="https://cdn.jsdelivr.net/npm/nouislider@15.6.1/dist/nouislider.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/nouislider@15.6.1/dist/nouislider.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

    <script src="slider.js"></script>

</head>
<body ng-controller="MainCtrl">
    <!-- Bouton pour ouvrir/fermer le menu -->
    <button id="menuButton" ng-click="toggleMenu()">
        <i class="fas fa-bars"></i>
    </button>

    <!-- Menu latéral -->
    <div id="sideMenu">
        <a href="javascript:void(0)" class="closebtn" ng-click="closeMenu()">&times;</a>
        <a href="javascript:void(0)" ng-click="showView('chart')">Graphique</a>
        <a href="javascript:void(0)" ng-click="showView('map')">Carte</a>
        <a href="javascript:void(0)" ng-click="showView('info')">Info</a>
    </div>

    <!-- Contenu principal -->
    <div id="main">
        <h1 class="title-hero">{{ currentTitle }}</h1>

        <div class="navButtons">
            <button class="nav-btn" ng-click="showView('chart')" ng-class="{'active': currentView === 'chart'}">
                <i class="fas fa-chart-line"></i> Graphique
            </button>
            <button class="nav-btn" ng-click="showView('map')" ng-class="{'active': currentView === 'map'}">
                <i class="fas fa-map-marked-alt"></i> Carte
            </button>
        </div>


        <!-- Conteneur pour le graphique -->
        <div id="chartContainer">
            <!-- Sélecteur de période -->
            
            <label for="yearSlider">Sélectionnez la période :</label>
            <div id="yearSlider" style="margin: 20px 0;"></div>
            <div style="margin-top: 10px;">
                <button id="playButton" class="btn">▶️ Play</button>
            </div>

            <div style="width: 80%; margin: 20px auto;">
                <canvas id="myChart"></canvas>
            </div>
        </div>

        <!-- Conteneur pour la carte -->
        <div id="mapContainer">
            <div id="map"></div>
        </div>

        <div id="infoContainer" ng-show="currentView === 'info'">
            <p> Entrez votre commune pour découvrir les clubs, services et associations près de chez vous. </p>
            <div id="here" ng-controller="SearchCtrl">
                <input type="text" ng-model="searchQuery" placeholder="Search commune..." ng-change="filterResults()" />
                    <table>
                    <tr ng-repeat="item in filteredResults">
                        <td>{{ item.commune }}</td>
                        <td><a ng-href="{{ item.lien }}" target="_blank">{{ item["texte lien"] }}</a></td>
                    </tr>
                    </table>

            </div>
    </div>

    </div>

    <!-- Navigation Buttons (Bottom Right Corner) -->
    <div id="pageNavigation">
        <button id="prevPage" class="dash-btn" ng-click="previousPage()">
            <i class="fas fa-arrow-left"></i>
        </button>
        <button id="nextPage" class="dash-btn" ng-click="nextPage()">
            <i class="fas fa-arrow-right"></i>
        </button>
    </div>


</body>
</html>